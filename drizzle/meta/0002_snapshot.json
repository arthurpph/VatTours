{
   "id": "27d8bc91-db8a-418c-a16c-c1e00df61db5",
   "prevId": "30226e36-9b9b-4546-9fe0-af0da3238946",
   "version": "7",
   "dialect": "postgresql",
   "tables": {
      "public.airports": {
         "name": "airports",
         "schema": "",
         "columns": {
            "icao": {
               "name": "icao",
               "type": "text",
               "primaryKey": true,
               "notNull": true
            },
            "name": {
               "name": "name",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "country": {
               "name": "country",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            }
         },
         "indexes": {},
         "foreignKeys": {},
         "compositePrimaryKeys": {},
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.badges": {
         "name": "badges",
         "schema": "",
         "columns": {
            "id": {
               "name": "id",
               "type": "serial",
               "primaryKey": true,
               "notNull": true
            },
            "name": {
               "name": "name",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "description": {
               "name": "description",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "image": {
               "name": "image",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            }
         },
         "indexes": {},
         "foreignKeys": {},
         "compositePrimaryKeys": {},
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.legs": {
         "name": "legs",
         "schema": "",
         "columns": {
            "id": {
               "name": "id",
               "type": "serial",
               "primaryKey": true,
               "notNull": true
            },
            "tour_id": {
               "name": "tour_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            },
            "departure_icao": {
               "name": "departure_icao",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "arrival_icao": {
               "name": "arrival_icao",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "description": {
               "name": "description",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "order": {
               "name": "order",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            }
         },
         "indexes": {},
         "foreignKeys": {
            "legs_tour_id_tours_id_fk": {
               "name": "legs_tour_id_tours_id_fk",
               "tableFrom": "legs",
               "tableTo": "tours",
               "columnsFrom": ["tour_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            },
            "legs_departure_icao_airports_icao_fk": {
               "name": "legs_departure_icao_airports_icao_fk",
               "tableFrom": "legs",
               "tableTo": "airports",
               "columnsFrom": ["departure_icao"],
               "columnsTo": ["icao"],
               "onDelete": "restrict",
               "onUpdate": "no action"
            },
            "legs_arrival_icao_airports_icao_fk": {
               "name": "legs_arrival_icao_airports_icao_fk",
               "tableFrom": "legs",
               "tableTo": "airports",
               "columnsFrom": ["arrival_icao"],
               "columnsTo": ["icao"],
               "onDelete": "restrict",
               "onUpdate": "no action"
            }
         },
         "compositePrimaryKeys": {},
         "uniqueConstraints": {
            "legs_tour_id_order_unique": {
               "name": "legs_tour_id_order_unique",
               "nullsNotDistinct": false,
               "columns": ["tour_id", "order"]
            }
         },
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.pireps": {
         "name": "pireps",
         "schema": "",
         "columns": {
            "id": {
               "name": "id",
               "type": "serial",
               "primaryKey": true,
               "notNull": true
            },
            "user_id": {
               "name": "user_id",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "leg_id": {
               "name": "leg_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            },
            "submitted_at": {
               "name": "submitted_at",
               "type": "timestamp",
               "primaryKey": false,
               "notNull": true,
               "default": "now()"
            },
            "status": {
               "name": "status",
               "type": "text",
               "primaryKey": false,
               "notNull": true,
               "default": "'pending'"
            },
            "callsign": {
               "name": "callsign",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "comment": {
               "name": "comment",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "reviewer_id": {
               "name": "reviewer_id",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "reviewed_at": {
               "name": "reviewed_at",
               "type": "timestamp",
               "primaryKey": false,
               "notNull": false
            },
            "review_note": {
               "name": "review_note",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "logbook_url": {
               "name": "logbook_url",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            }
         },
         "indexes": {
            "idx_pireps_legId": {
               "name": "idx_pireps_legId",
               "columns": [
                  {
                     "expression": "leg_id",
                     "isExpression": false,
                     "asc": true,
                     "nulls": "last"
                  }
               ],
               "isUnique": false,
               "concurrently": false,
               "method": "btree",
               "with": {}
            },
            "idx_pireps_userId_legId": {
               "name": "idx_pireps_userId_legId",
               "columns": [
                  {
                     "expression": "user_id",
                     "isExpression": false,
                     "asc": true,
                     "nulls": "last"
                  },
                  {
                     "expression": "leg_id",
                     "isExpression": false,
                     "asc": true,
                     "nulls": "last"
                  }
               ],
               "isUnique": false,
               "concurrently": false,
               "method": "btree",
               "with": {}
            },
            "idx_pireps_userId_status": {
               "name": "idx_pireps_userId_status",
               "columns": [
                  {
                     "expression": "user_id",
                     "isExpression": false,
                     "asc": true,
                     "nulls": "last"
                  },
                  {
                     "expression": "status",
                     "isExpression": false,
                     "asc": true,
                     "nulls": "last"
                  }
               ],
               "isUnique": false,
               "concurrently": false,
               "method": "btree",
               "with": {}
            }
         },
         "foreignKeys": {
            "pireps_user_id_users_id_fk": {
               "name": "pireps_user_id_users_id_fk",
               "tableFrom": "pireps",
               "tableTo": "users",
               "columnsFrom": ["user_id"],
               "columnsTo": ["id"],
               "onDelete": "no action",
               "onUpdate": "no action"
            },
            "pireps_leg_id_legs_id_fk": {
               "name": "pireps_leg_id_legs_id_fk",
               "tableFrom": "pireps",
               "tableTo": "legs",
               "columnsFrom": ["leg_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            },
            "pireps_reviewer_id_users_id_fk": {
               "name": "pireps_reviewer_id_users_id_fk",
               "tableFrom": "pireps",
               "tableTo": "users",
               "columnsFrom": ["reviewer_id"],
               "columnsTo": ["id"],
               "onDelete": "set null",
               "onUpdate": "no action"
            }
         },
         "compositePrimaryKeys": {},
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {
            "callsign_length_and_format": {
               "name": "callsign_length_and_format",
               "value": "length(\"pireps\".\"callsign\") <= 12 AND \"pireps\".\"callsign\" ~ '^[A-Za-z0-9]*$'"
            },
            "comment_length": {
               "name": "comment_length",
               "value": "length(coalesce(\"pireps\".\"comment\", '')) <= 100"
            },
            "review_note_length": {
               "name": "review_note_length",
               "value": "length(coalesce(\"pireps\".\"review_note\", '')) <= 100"
            }
         },
         "isRLSEnabled": false
      },
      "public.tour_badges": {
         "name": "tour_badges",
         "schema": "",
         "columns": {
            "tour_id": {
               "name": "tour_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            },
            "badge_id": {
               "name": "badge_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            }
         },
         "indexes": {},
         "foreignKeys": {
            "tour_badges_tour_id_tours_id_fk": {
               "name": "tour_badges_tour_id_tours_id_fk",
               "tableFrom": "tour_badges",
               "tableTo": "tours",
               "columnsFrom": ["tour_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            },
            "tour_badges_badge_id_badges_id_fk": {
               "name": "tour_badges_badge_id_badges_id_fk",
               "tableFrom": "tour_badges",
               "tableTo": "badges",
               "columnsFrom": ["badge_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            }
         },
         "compositePrimaryKeys": {
            "tour_badges_tour_id_badge_id_pk": {
               "name": "tour_badges_tour_id_badge_id_pk",
               "columns": ["tour_id", "badge_id"]
            }
         },
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.tours": {
         "name": "tours",
         "schema": "",
         "columns": {
            "id": {
               "name": "id",
               "type": "serial",
               "primaryKey": true,
               "notNull": true
            },
            "title": {
               "name": "title",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "description": {
               "name": "description",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "image": {
               "name": "image",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "created_at": {
               "name": "created_at",
               "type": "timestamp",
               "primaryKey": false,
               "notNull": false,
               "default": "now()"
            }
         },
         "indexes": {},
         "foreignKeys": {},
         "compositePrimaryKeys": {},
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.user_badges": {
         "name": "user_badges",
         "schema": "",
         "columns": {
            "user_id": {
               "name": "user_id",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "badge_id": {
               "name": "badge_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            },
            "earned_at": {
               "name": "earned_at",
               "type": "timestamp",
               "primaryKey": false,
               "notNull": false,
               "default": "now()"
            }
         },
         "indexes": {},
         "foreignKeys": {
            "user_badges_user_id_users_id_fk": {
               "name": "user_badges_user_id_users_id_fk",
               "tableFrom": "user_badges",
               "tableTo": "users",
               "columnsFrom": ["user_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            },
            "user_badges_badge_id_badges_id_fk": {
               "name": "user_badges_badge_id_badges_id_fk",
               "tableFrom": "user_badges",
               "tableTo": "badges",
               "columnsFrom": ["badge_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            }
         },
         "compositePrimaryKeys": {
            "user_badges_user_id_badge_id_pk": {
               "name": "user_badges_user_id_badge_id_pk",
               "columns": ["user_id", "badge_id"]
            }
         },
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.user_tours": {
         "name": "user_tours",
         "schema": "",
         "columns": {
            "user_id": {
               "name": "user_id",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "tour_id": {
               "name": "tour_id",
               "type": "integer",
               "primaryKey": false,
               "notNull": true
            },
            "completed_at": {
               "name": "completed_at",
               "type": "timestamp",
               "primaryKey": false,
               "notNull": false,
               "default": "now()"
            }
         },
         "indexes": {},
         "foreignKeys": {
            "user_tours_user_id_users_id_fk": {
               "name": "user_tours_user_id_users_id_fk",
               "tableFrom": "user_tours",
               "tableTo": "users",
               "columnsFrom": ["user_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            },
            "user_tours_tour_id_tours_id_fk": {
               "name": "user_tours_tour_id_tours_id_fk",
               "tableFrom": "user_tours",
               "tableTo": "tours",
               "columnsFrom": ["tour_id"],
               "columnsTo": ["id"],
               "onDelete": "cascade",
               "onUpdate": "no action"
            }
         },
         "compositePrimaryKeys": {
            "user_tours_user_id_tour_id_pk": {
               "name": "user_tours_user_id_tour_id_pk",
               "columns": ["user_id", "tour_id"]
            }
         },
         "uniqueConstraints": {},
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      },
      "public.users": {
         "name": "users",
         "schema": "",
         "columns": {
            "id": {
               "name": "id",
               "type": "text",
               "primaryKey": true,
               "notNull": true
            },
            "name": {
               "name": "name",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "email": {
               "name": "email",
               "type": "text",
               "primaryKey": false,
               "notNull": true
            },
            "image": {
               "name": "image",
               "type": "text",
               "primaryKey": false,
               "notNull": false
            },
            "role": {
               "name": "role",
               "type": "text",
               "primaryKey": false,
               "notNull": true,
               "default": "'user'"
            }
         },
         "indexes": {},
         "foreignKeys": {},
         "compositePrimaryKeys": {},
         "uniqueConstraints": {
            "users_email_unique": {
               "name": "users_email_unique",
               "nullsNotDistinct": false,
               "columns": ["email"]
            }
         },
         "policies": {},
         "checkConstraints": {},
         "isRLSEnabled": false
      }
   },
   "enums": {},
   "schemas": {},
   "sequences": {},
   "roles": {},
   "policies": {},
   "views": {},
   "_meta": {
      "columns": {},
      "schemas": {},
      "tables": {}
   }
}
